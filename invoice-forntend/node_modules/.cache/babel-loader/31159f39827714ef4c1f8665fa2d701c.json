{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ammad\\\\Desktop\\\\in\\\\invoice-forntend\\\\src\\\\Pages\\\\Invoice-patient\\\\index.js\";\n// import React from 'react'\n// import RowAndColumnSpacing from '../../components/Grid'\n// import BasicTextFields from '../../components/TextFields'\n// const index = () => {\n//     const patient=[{\n//         patientCode: 1000002,\n//         patientName: \"Loubna Saoud\",\n//         registrationDate: \"2020-03-03 11:18:23.390\",\n//         appDate: \"2021-10-04 00:00:00.000\",\n//         provoder: \"Dr. Firas Hamzeh\",\n//     },\n//     {\n//         patientCode: 1000003,\n//         patientName: \"Loubna Saoud\",\n//         registrationDate: \"2020-03-03 11:18:23.390\",\n//         appDate: \"2021-10-04 00:00:00.000\",\n//         provoder: \"Dr. Firas Hamzeh\",\n//     },\n//     {\n//         patientCode: 1000004,\n//         patientName: \"Loubna Saoud\",\n//         registrationDate: \"2020-03-03 11:18:23.390\",\n//         appDate: \"2021-10-04 00:00:00.000\",\n//         provoder: \"Dr. Firas Hamzeh\",\n//     },\n//     {\n//         patientCode: 1000005,\n//         patientName: \"Loubna Saoud\",\n//         registrationDate: \"2020-03-03 11:18:23.390\",\n//         appDate: \"2021-10-04 00:00:00.000\",\n//         provoder: \"Dr. Firas Hamzeh\",\n//     },\n// ]\n//   return (\n//    <RowAndColumnSpacing data={patient} />\n//   )\n// }\n// export default index\nimport React, { Component } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  REACT_APP_SERVER_URL,\n  TRN,\n  CLINIC_ADDRESS,\n  CLINIC_NAME,\n  CLINIC_EMAIL,\n  CURRENCY,\n  CR\n} = window.env;\n\nclass Invoice extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getInvoices = e => {\n      e.preventDefault();\n      let id = this.state.patientId;\n      if (!this.isValidId(id)) return;\n      axios.get(REACT_APP_SERVER_URL + 'getInvoice?patientId=' + id).then(res => {\n        console.log('response : ', res);\n\n        if (res.data) {\n          if (res.data.services.length < 1) {\n            alert('No service provided to this patient today');\n            return;\n          }\n\n          this.setState({\n            'patientDetail': res.data.patientDetails,\n            'services': res.data.services,\n            'paymentDetails': res.data.paymentDetails,\n            'discounts': res.data.discountsDetails,\n            'showPatientList': false,\n            'showInvoiceList': false\n          });\n        } else {//   alert(\"Backend Service failed to respond\");\n        }\n      }, error => {\n        // alert(\"Backend Service failed to respond\");\n        console.log('error : ', error);\n      });\n    };\n\n    this.isValidId = id => {\n      if (!id) {\n        alert('Please enter Patient Id first');\n        return false;\n      }\n\n      if (isNaN(id)) {\n        alert('Please enter a valid Patient Id');\n        return false;\n      }\n\n      return true;\n    };\n\n    this.getInvoiceListByPatient = e => {\n      e.preventDefault();\n      let id = this.state.patientId;\n      if (!this.isValidId(id)) return;\n      axios.get(REACT_APP_SERVER_URL + 'getInvoiceList?invoicesPerPage=100&patientId=' + id).then(res => {\n        console.log('response : ', res);\n\n        if (res.data) {\n          this.setState({\n            'invoiceList': res.data.invoices,\n            'showPatientList': false,\n            'showInvoiceList': true,\n            'patientIdForOldInvoice': id\n          });\n        } else {//   alert(\"Backend Service failed to respond\");\n        }\n      }, error => {\n        // alert(\"Backend Service failed to respond\");\n        console.log('error : ', error);\n      });\n    };\n\n    this.cancelInvoice = e => {\n      this.setState({\n        'patientDetail': null,\n        'services': null,\n        'paymentDetails': null,\n        'discounts': null,\n        'showPatientList': true\n      });\n    };\n\n    this.onInputchange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.regenerateInvoice = invoiceNo => {\n      let id = this.state.patientId;\n      if (!this.isValidId(id)) return; // axios.get('http://192.168.1.109:8085/getInvoice?patientId=' + this.state.patientId)\n\n      axios.get(REACT_APP_SERVER_URL + 'getOldInvoice?invoiceNo=' + invoiceNo + '&patientId=' + this.state.patientIdForOldInvoice).then(res => {\n        if (res.data) {\n          this.setState({\n            'patientDetail': res.data.patientDetails,\n            'services': res.data.services,\n            'paymentDetails': res.data.paymentDetails,\n            'discounts': res.data.discountsDetails,\n            'showPatientList': false,\n            'showInvoiceList': false\n          });\n        } else {//   alert(\"Backend Service failed to respond\");\n        }\n      }, error => {\n        // alert(\"Backend Service failed to respond\");\n        console.log('error : ', error);\n      });\n    };\n\n    this.changePatientId = patientId => {\n      this.setState({\n        patientId: patientId\n      });\n    };\n\n    this.showPatientList = e => {\n      e.preventDefault();\n      this.setState({\n        showPatientList: true,\n        showInvoiceList: false\n      });\n    };\n\n    this.state = {\n      dated: new Date().toLocaleString(),\n      patientId: undefined,\n      showPatientList: true\n    };\n  }\n\n  componentDidMount() {\n    axios.get(REACT_APP_SERVER_URL + 'getPatients').then(res => {\n      if (res.data) {\n        if (res.data.patients && res.data.patients.length > 0) {\n          this.setState({\n            patientList: res.data.patients\n          });\n        } else {\n          alert('No Patient found.');\n        }\n      } else {//   alert(\"Backend Service failed to respond\");\n      }\n    }, error => {\n      // alert(\"Backend Service failed to respond\");\n      console.log('error : ', error);\n    });\n  }\n\n  render() {\n    const patientDetail = this.state.patientDetail;\n    const services = this.state.services;\n    const paymentDetails = this.state.paymentDetails;\n    const discounts = this.state.discounts;\n    const dated = this.state.dated;\n    const patientList = this.state.patientList;\n    const showPatientList = this.state.showPatientList;\n    const invoiceList = this.state.invoiceList;\n    const showInvoiceList = this.state.showInvoiceList;\n    let cost = {\n      totalCost: 0,\n      totalVat: 0,\n      totalPayment: 0,\n      discount: 0\n    };\n\n    if (discounts && discounts.length > 0) {\n      discounts.forEach(discount => {\n        cost.discount += discount.amount * -1;\n      });\n    }\n\n    ;\n    let invoices = invoiceList ? invoiceList.map((inv, key) => {\n      return /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n          onClick: () => this.regenerateInvoice(inv.invoicenumber),\n          className: \"link\",\n          children: inv.invoicenumber\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: inv.patientcode\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: inv.invoicedate\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 11\n        }, this)]\n      }, key, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this);\n    }) : null;\n    let patients = patientList ? patientList.map((pat, key) => {\n      return /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n          onClick: () => this.changePatientId(pat.patientcode),\n          className: \"link\",\n          children: pat.patientcode\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: pat.patientname\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: pat.gender === 'M' ? 'Male' : 'Female'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: pat.dob\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }, this)]\n      }, key, true, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, this);\n    }) : null;\n    let serviceTable = services && services.length > 0 ? services.map(res => {\n      cost.totalCost += res.patientcost;\n      cost.totalVat += res.vatamount;\n      return /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n          children: res.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          children: res.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          style: {\n            textAlign: \"center\"\n          },\n          children: res.codeid\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          style: {\n            textAlign: \"center\"\n          },\n          children: res.Tooth\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          style: {\n            textAlign: \"center\"\n          },\n          children: res.Surface\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          style: {\n            textAlign: \"right\"\n          },\n          children: res.patientcost.toFixed(2)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          style: {\n            textAlign: \"center\"\n          },\n          children: res.vatpercent\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          style: {\n            textAlign: \"right\"\n          },\n          children: res.vatamount.toFixed(2)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n          style: {\n            textAlign: \"right\"\n          },\n          children: res.amountwithvat.toFixed(2)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this);\n    }) : null;\n    let paymentsSection = paymentDetails && paymentDetails.length > 0 ? paymentDetails.map(payment => {\n      cost.totalPayment += payment.amount;\n      const amount = payment.amount < 0 ? payment.amount * -1 : payment.amount;\n      const amountDisplay = payment.paymenttypedesc === 'Refund Cash' ? '(' + amount.toFixed(2) + ')' : amount.toFixed(2);\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"col-sm-6 col-md-6\",\n          children: payment.paymenttypedesc && payment.paymenttypedesc.length > 0 ? payment.paymenttypedesc : payment.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"col-sm-6 col-md-6\",\n          style: {\n            textAlign: \"right\"\n          },\n          children: amountDisplay\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 11\n      }, this);\n    }) : null;\n    const totalPayment = cost.totalPayment < 0 ? cost.totalPayment * -1 : cost.totalPayment;\n    cost.netAmount = cost.totalCost - cost.discount;\n    cost.grandTotal = cost.totalCost - cost.discount + cost.totalVat;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"receipt_box\",\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"logo\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: process.env.PUBLIC_URL + \"/logo.png\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"invoice-tab\",\n        children: [!patientDetail ? /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"form_section\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"patientId\",\n              type: \"text\",\n              placeholder: \"Enter Patient Code\",\n              value: this.state.patientId,\n              onChange: this.onInputchange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-primary\",\n              onClick: e => this.getInvoices(e),\n              children: \"Generate Invoice\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 17\n            }, this), showPatientList ? /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-primary ml-10\",\n              onClick: e => this.getInvoiceListByPatient(e),\n              children: \"Get Invoices\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-primary ml-10\",\n              onClick: e => this.showPatientList(e),\n              children: \"Show Patient List\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 13\n        }, this) : null, invoices && showInvoiceList ? /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"invoice-list\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"table table-bordered\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Invoice Number\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 303,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Patient Code\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 304,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Invoice Date\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 305,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: invoices\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 15\n        }, this) : '', patients && showPatientList ? /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"patient-list\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"table table-bordered\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Patient Id\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 321,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Patient Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 322,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Gender\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 323,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"DOB\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 324,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: patients\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 15\n        }, this) : '', patientDetail ? /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"patient_detail\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-center\",\n            children: \"Tax Invoice\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 338,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-center mb-0\",\n            children: [\"TRN : \", TRN]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-center mb-5\",\n            children: CR\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-sm-5 col-md-5\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"col-sm-4 col-md-4\",\n                  children: \"Patient:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 344,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"col-sm-4 col-md-4\",\n                  children: patientDetail.patientname\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 345,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"col-sm-4 col-md-4\",\n                  children: \"Invoice No:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 348,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"col-sm-4 col-md-4\",\n                  children: patientDetail.invoicenumber\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 349,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 347,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"col-sm-4 col-md-4\",\n                  children: \"Date:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 352,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"col-sm-4 col-md-4\",\n                  children: new Date(services[0].dateofservice).toLocaleDateString(\"en-UK\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 354,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 351,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-sm-4 col-md-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"col-sm-4 col-md-4\",\n                  children: \"Patient Code:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 359,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"col-sm-4 col-md-4\",\n                  children: patientDetail.patientcode\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 360,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 358,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"col-sm-4 col-md-4\",\n                  children: \"Gender:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 363,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"col-sm-4 col-md-4\",\n                  children: patientDetail.gender === 'M' ? 'Male' : patientDetail.gender === 'F' ? 'Female' : 'Unknown'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 364,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 362,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"col-sm-4 col-md-4\",\n                  children: \"DOB:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 367,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"col-sm-4 col-md-4\",\n                  children: new Date(patientDetail.dob).toLocaleDateString(\"en-UK\")\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 368,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 15\n        }, this) : null, serviceTable ? /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"provider_detail\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"table table-bordered\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Provider\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 380,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Service\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 381,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Code\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 382,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Tooth\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 383,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Surface\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 384,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Amount\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 385,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"VAT%\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 386,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"VAT\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 387,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Amount With VAT\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 388,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 379,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: serviceTable\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 15\n        }, this) : null, serviceTable ? /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"payment_detail\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-sm-4 col-md-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Payment Mode\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 403,\n                columnNumber: 21\n              }, this), paymentsSection, /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"col-sm-6 col-md-6\",\n                  children: \"Total Payment:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 406,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"col-sm-6 col-md-6\",\n                  style: {\n                    textAlign: \"right\"\n                  },\n                  children: totalPayment.toFixed(2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 407,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 405,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-sm-2 col-md-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-sm-4 col-md-4\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"col-sm-6 col-md-6\",\n                  children: \"Total:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 413,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"col-sm-6 col-md-6\",\n                  style: {\n                    textAlign: \"right\"\n                  },\n                  children: cost.totalCost.toFixed(2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 414,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"col-sm-6 col-md-6\",\n                  children: \"Discount:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 415,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"col-sm-6 col-md-6\",\n                  style: {\n                    textAlign: \"right\"\n                  },\n                  children: cost.discount.toFixed(2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 416,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"col-sm-6 col-md-6\",\n                  children: \"Net Amount:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 417,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"col-sm-6 col-md-6\",\n                  style: {\n                    textAlign: \"right\"\n                  },\n                  children: cost.netAmount.toFixed(2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 418,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"col-sm-6 col-md-6\",\n                  children: \"Total VAT:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 419,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"col-sm-6 col-md-6\",\n                  style: {\n                    textAlign: \"right\"\n                  },\n                  children: cost.totalVat.toFixed(2)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 420,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"col-sm-6 col-md-6\",\n                  children: /*#__PURE__*/_jsxDEV(\"b\", {\n                    children: \"Grand Total:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 422,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 421,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"col-sm-6 col-md-6\",\n                  style: {\n                    textAlign: \"right\"\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"b\", {\n                    children: cost.grandTotal.toFixed(2)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 425,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 424,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"col-sm-6 col-md-6\",\n                  children: /*#__PURE__*/_jsxDEV(\"b\", {\n                    children: \"Total Payment:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 428,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 427,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"col-sm-6 col-md-6\",\n                  style: {\n                    textAlign: \"right\"\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"b\", {\n                    children: totalPayment.toFixed(2)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 431,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 430,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"col-sm-6 col-md-6\",\n                  children: /*#__PURE__*/_jsxDEV(\"b\", {\n                    children: \"Invoice Balance:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 434,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 433,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"col-sm-6 col-md-6\",\n                  style: {\n                    textAlign: \"right\"\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"b\", {\n                    children: (cost.grandTotal + cost.totalPayment).toFixed(2)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 437,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 436,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"col-sm-6 col-md-6\",\n                  children: /*#__PURE__*/_jsxDEV(\"b\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 440,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 439,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"col-sm-6 col-md-6\",\n                  children: /*#__PURE__*/_jsxDEV(\"b\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 443,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 442,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"col-sm-6 col-md-6\",\n                  children: /*#__PURE__*/_jsxDEV(\"b\", {\n                    children: \"Patient Balance:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 446,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 445,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"col-sm-6 col-md-6\",\n                  style: {\n                    textAlign: \"right\"\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"b\", {\n                    children: parseInt(patientDetail.balance).toFixed(2)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 449,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 448,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 412,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 15\n        }, this) : null, patientDetail ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: /*#__PURE__*/_jsxDEV(\"b\", {\n              children: [\"Note: Currency = \", CURRENCY]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 459,\n              columnNumber: 18\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-center\",\n              children: CLINIC_NAME\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 462,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-center\",\n              children: CLINIC_ADDRESS\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 465,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-center\",\n              children: CLINIC_EMAIL\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-end\",\n              children: [\"Powered by \", /*#__PURE__*/_jsxDEV(\"b\", {\n                children: /*#__PURE__*/_jsxDEV(\"i\", {\n                  children: \"DigiSol Ltd.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 469,\n                  columnNumber: 58\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 469,\n                columnNumber: 55\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 469,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row justify-content-md-center no-print\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-sm-2 col-md-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn btn-primary\",\n                onClick: e => window.print(),\n                children: \"Print\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 473,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn btn-btn-light\",\n                onClick: e => this.cancelInvoice(e),\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 474,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 472,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 471,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default Invoice;","map":{"version":3,"sources":["C:/Users/Ammad/Desktop/in/invoice-forntend/src/Pages/Invoice-patient/index.js"],"names":["React","Component","axios","REACT_APP_SERVER_URL","TRN","CLINIC_ADDRESS","CLINIC_NAME","CLINIC_EMAIL","CURRENCY","CR","window","env","Invoice","constructor","props","getInvoices","e","preventDefault","id","state","patientId","isValidId","get","then","res","console","log","data","services","length","alert","setState","patientDetails","paymentDetails","discountsDetails","error","isNaN","getInvoiceListByPatient","invoices","cancelInvoice","onInputchange","event","target","name","value","regenerateInvoice","invoiceNo","patientIdForOldInvoice","changePatientId","showPatientList","showInvoiceList","dated","Date","toLocaleString","undefined","componentDidMount","patients","patientList","render","patientDetail","discounts","invoiceList","cost","totalCost","totalVat","totalPayment","discount","forEach","amount","map","inv","key","invoicenumber","patientcode","invoicedate","pat","patientname","gender","dob","serviceTable","patientcost","vatamount","username","description","textAlign","codeid","Tooth","Surface","toFixed","vatpercent","amountwithvat","paymentsSection","payment","amountDisplay","paymenttypedesc","netAmount","grandTotal","process","PUBLIC_URL","dateofservice","toLocaleDateString","parseInt","balance","print"],"mappings":"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","sourcesContent":["// import React from 'react'\r\n// import RowAndColumnSpacing from '../../components/Grid'\r\n// import BasicTextFields from '../../components/TextFields'\r\n\r\n\r\n// const index = () => {\r\n//     const patient=[{\r\n//         patientCode: 1000002,\r\n//         patientName: \"Loubna Saoud\",\r\n//         registrationDate: \"2020-03-03 11:18:23.390\",\r\n//         appDate: \"2021-10-04 00:00:00.000\",\r\n//         provoder: \"Dr. Firas Hamzeh\",\r\n//     },\r\n//     {\r\n//         patientCode: 1000003,\r\n//         patientName: \"Loubna Saoud\",\r\n//         registrationDate: \"2020-03-03 11:18:23.390\",\r\n//         appDate: \"2021-10-04 00:00:00.000\",\r\n//         provoder: \"Dr. Firas Hamzeh\",\r\n//     },\r\n//     {\r\n//         patientCode: 1000004,\r\n//         patientName: \"Loubna Saoud\",\r\n//         registrationDate: \"2020-03-03 11:18:23.390\",\r\n//         appDate: \"2021-10-04 00:00:00.000\",\r\n//         provoder: \"Dr. Firas Hamzeh\",\r\n//     },\r\n//     {\r\n//         patientCode: 1000005,\r\n//         patientName: \"Loubna Saoud\",\r\n//         registrationDate: \"2020-03-03 11:18:23.390\",\r\n//         appDate: \"2021-10-04 00:00:00.000\",\r\n//         provoder: \"Dr. Firas Hamzeh\",\r\n//     },\r\n// ]\r\n//   return (\r\n//    <RowAndColumnSpacing data={patient} />\r\n//   )\r\n// }\r\n\r\n// export default index\r\n\r\nimport React, { Component } from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport axios from 'axios';\r\n\r\nconst {REACT_APP_SERVER_URL, TRN, CLINIC_ADDRESS, CLINIC_NAME, CLINIC_EMAIL, CURRENCY, CR} = window.env;\r\nclass Invoice extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      dated: new Date().toLocaleString(),\r\n      patientId: undefined,\r\n      showPatientList: true\r\n    };\r\n  }\r\n  getInvoices=(e)=> {\r\n    e.preventDefault();\r\n    let id = this.state.patientId;\r\n    if(!this.isValidId(id)) return;\r\n    axios.get(REACT_APP_SERVER_URL + 'getInvoice?patientId=' + id)\r\n      .then(res => {\r\n        console.log('response : ', res);\r\n        if(res.data) {\r\n          if(res.data.services.length < 1 ) {\r\n            alert('No service provided to this patient today');\r\n            return;\r\n          }\r\n          this.setState({\r\n            'patientDetail' : res.data.patientDetails,\r\n            'services' : res.data.services,\r\n            'paymentDetails' : res.data.paymentDetails,\r\n            'discounts' : res.data.discountsDetails,\r\n            'showPatientList' : false,\r\n            'showInvoiceList' : false\r\n          });\r\n        } else {\r\n        //   alert(\"Backend Service failed to respond\");\r\n        }\r\n      }, (error)=> {\r\n        // alert(\"Backend Service failed to respond\");\r\n        console.log('error : ', error);\r\n      }\r\n    )\r\n  }\r\n\r\n  isValidId = (id) => {\r\n    if(!id) {\r\n      alert('Please enter Patient Id first');\r\n      return false;\r\n    }\r\n    if(isNaN(id)) {\r\n      alert('Please enter a valid Patient Id');\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  getInvoiceListByPatient= (e)=> {\r\n    e.preventDefault();\r\n    let id = this.state.patientId;\r\n    if(!this.isValidId(id)) return;\r\n    axios.get(REACT_APP_SERVER_URL + 'getInvoiceList?invoicesPerPage=100&patientId=' + id)\r\n      .then(res => {\r\n        console.log('response : ', res);\r\n        if(res.data) {\r\n          this.setState({\r\n            'invoiceList' : res.data.invoices,\r\n            'showPatientList' : false,\r\n            'showInvoiceList' : true,\r\n            'patientIdForOldInvoice' : id\r\n          });\r\n        } else {\r\n        //   alert(\"Backend Service failed to respond\");\r\n        }\r\n      }, (error)=> {\r\n        // alert(\"Backend Service failed to respond\");\r\n        console.log('error : ', error);\r\n      }\r\n    )\r\n  }\r\n\r\n  cancelInvoice = (e) => {\r\n    this.setState({\r\n      'patientDetail' : null,\r\n      'services' : null,\r\n      'paymentDetails' : null,\r\n      'discounts' : null,\r\n      'showPatientList' : true\r\n    });\r\n  }\r\n\r\n  onInputchange=(event)=> {\r\n    this.setState({\r\n      [event.target.name]: event.target.value\r\n    });\r\n  }\r\n\r\n  regenerateInvoice = (invoiceNo) => {\r\n    let id = this.state.patientId;\r\n    if(!this.isValidId(id)) return;\r\n    // axios.get('http://192.168.1.109:8085/getInvoice?patientId=' + this.state.patientId)\r\n    axios.get(REACT_APP_SERVER_URL + 'getOldInvoice?invoiceNo=' + invoiceNo + '&patientId=' + this.state.patientIdForOldInvoice)\r\n      .then(res => {\r\n        if(res.data) {\r\n          this.setState({\r\n            'patientDetail' : res.data.patientDetails,\r\n            'services' : res.data.services,\r\n            'paymentDetails' : res.data.paymentDetails,\r\n            'discounts' : res.data.discountsDetails,\r\n            'showPatientList' : false,\r\n            'showInvoiceList' : false\r\n          });\r\n        } else {\r\n        //   alert(\"Backend Service failed to respond\");\r\n        }\r\n      }, (error)=> {\r\n        // alert(\"Backend Service failed to respond\");\r\n        console.log('error : ', error);\r\n      }\r\n    )\r\n  }\r\n\r\n  componentDidMount() {\r\n    axios.get(REACT_APP_SERVER_URL + 'getPatients')\r\n      .then(res => {\r\n        if(res.data) {\r\n          if(res.data.patients && res.data.patients.length > 0) {\r\n            this.setState({patientList : res.data.patients});\r\n          } else {\r\n            alert('No Patient found.');\r\n          }\r\n        } else {\r\n        //   alert(\"Backend Service failed to respond\");\r\n        }\r\n      }, (error)=> {\r\n        // alert(\"Backend Service failed to respond\");\r\n        console.log('error : ', error);\r\n      }\r\n    );\r\n  }\r\n\r\n  changePatientId = (patientId)=> {\r\n    this.setState({patientId : patientId});\r\n  }\r\n\r\n  showPatientList = (e) => {\r\n    e.preventDefault();\r\n    this.setState({\r\n      showPatientList : true,\r\n      showInvoiceList: false\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const patientDetail = this.state.patientDetail;\r\n    const services = this.state.services;\r\n    const paymentDetails = this.state.paymentDetails;\r\n    const discounts = this.state.discounts;\r\n    const dated = this.state.dated;\r\n    const patientList = this.state.patientList;\r\n    const showPatientList = this.state.showPatientList;\r\n    const invoiceList = this.state.invoiceList;\r\n    const showInvoiceList = this.state.showInvoiceList;\r\n\r\n    let cost = {\r\n      totalCost : 0,\r\n      totalVat : 0,\r\n      totalPayment : 0,\r\n      discount: 0\r\n    };\r\n\r\n    if(discounts && discounts.length > 0) {\r\n      discounts.forEach(discount => {\r\n        cost.discount += (discount.amount * (-1));\r\n      });\r\n    };\r\n    let invoices = invoiceList ? invoiceList.map((inv, key) =>{\r\n      return(\r\n        <tr key={key}>\r\n          <td onClick={()=> this.regenerateInvoice(inv.invoicenumber)} className=\"link\">{inv.invoicenumber}</td>\r\n          <td>{inv.patientcode}</td>\r\n          <td>{inv.invoicedate}</td>\r\n        </tr>\r\n      )\r\n    }) : null;\r\n    let patients = patientList ? patientList.map((pat, key) =>{\r\n      return(\r\n        <tr key={key}>\r\n          <td onClick={()=> this.changePatientId(pat.patientcode)} className=\"link\">{pat.patientcode}</td>\r\n          <td>{pat.patientname}</td>\r\n          <td>{pat.gender === 'M' ? 'Male' : 'Female'}</td>\r\n          <td>{pat.dob}</td>\r\n        </tr>\r\n      )\r\n    }) : null;\r\n    let serviceTable = services && services.length > 0 ? services.map((res) => {\r\n      cost.totalCost += res.patientcost;\r\n      cost.totalVat += res.vatamount;\r\n      return (\r\n        <tr>\r\n          <td>{res.username}</td>\r\n          <td>{res.description}</td>\r\n          <td style={{textAlign: \"center\"}}>{res.codeid}</td>\r\n          <td style={{textAlign: \"center\"}}>{res.Tooth}</td>\r\n          <td style={{textAlign: \"center\"}}>{res.Surface}</td>\r\n          <td style={{textAlign: \"right\"}}>{res.patientcost.toFixed(2) }</td>\r\n          <td style={{textAlign: \"center\"}}>{res.vatpercent}</td>\r\n          <td style={{textAlign: \"right\"}}>{res.vatamount.toFixed(2)}</td>\r\n          <td style={{textAlign: \"right\"}}>{res.amountwithvat.toFixed(2)}</td>\r\n        </tr>\r\n      );\r\n    }) : null;\r\n\r\n    let paymentsSection = paymentDetails && paymentDetails.length > 0 ?\r\n      paymentDetails.map(payment=> {\r\n        cost.totalPayment += payment.amount;\r\n        const amount = payment.amount < 0 ? (payment.amount * (-1)) : payment.amount;\r\n        const amountDisplay = payment.paymenttypedesc === 'Refund Cash' ?\r\n          '(' + amount.toFixed(2) + ')' : amount.toFixed(2);\r\n        return (\r\n          <div className=\"row\">\r\n            <p className=\"col-sm-6 col-md-6\">{(payment.paymenttypedesc && payment.paymenttypedesc.length > 0) ? payment.paymenttypedesc : payment.description}</p>\r\n            <p className=\"col-sm-6 col-md-6\" style={{textAlign: \"right\"}}>{amountDisplay}</p>\r\n          </div>\r\n        )\r\n      })\r\n      : null;\r\n    \r\n    const totalPayment = (cost.totalPayment < 0) ? cost.totalPayment*(-1) : cost.totalPayment;\r\n    cost.netAmount = cost.totalCost - cost.discount;\r\n    cost.grandTotal = cost.totalCost - cost.discount + cost.totalVat;\r\n    return (\r\n      <div className=\"receipt_box\">\r\n        <header>\r\n          <div className=\"logo\">\r\n            <img src={process.env.PUBLIC_URL + \"/logo.png\"} />\r\n          </div>\r\n        </header>\r\n        <hr/>\r\n        <div className=\"invoice-tab\">\r\n          {\r\n            !patientDetail ? (\r\n            <section className=\"form_section\">\r\n              <form>\r\n                <input name=\"patientId\" type=\"text\" placeholder=\"Enter Patient Code\" value={this.state.patientId} onChange={this.onInputchange}/>\r\n                <button className=\"btn btn-primary\" onClick={(e)=>this.getInvoices(e)}>Generate Invoice</button>\r\n                { showPatientList ?\r\n                  <button className=\"btn btn-primary ml-10\" onClick={(e)=>this.getInvoiceListByPatient(e)}>Get Invoices</button>\r\n                  : \r\n                  <button className=\"btn btn-primary ml-10\" onClick={(e)=>this.showPatientList(e)}>Show Patient List</button>\r\n                }\r\n              </form>\r\n            </section>\r\n            ) : null\r\n          }\r\n          {invoices && showInvoiceList ? \r\n            (\r\n              <section className=\"invoice-list\">\r\n                <table className=\"table table-bordered\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th>Invoice Number</th>\r\n                      <th>Patient Code</th>\r\n                      <th>Invoice Date</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {invoices}\r\n                  </tbody>\r\n                </table>\r\n              </section>\r\n            ) : ''\r\n          }\r\n          {patients && showPatientList ? \r\n            (\r\n              <section className=\"patient-list\">\r\n                <table className=\"table table-bordered\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th>Patient Id</th>\r\n                      <th>Patient Name</th>\r\n                      <th>Gender</th>\r\n                      <th>DOB</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {patients}\r\n                  </tbody>\r\n                </table>\r\n              </section>\r\n            ) : ''\r\n          }\r\n\r\n          {\r\n            patientDetail ? (\r\n              <section className=\"patient_detail\">\r\n                <h2 className=\"text-center\">Tax Invoice</h2>\r\n                <p className=\"text-center mb-0\">TRN : {TRN}</p>\r\n                <p className=\"text-center mb-5\">{CR}</p>\r\n                <div className=\"row\">\r\n                  <div className=\"col-sm-5 col-md-5\">\r\n                    <div className=\"row\">\r\n                      <p className=\"col-sm-4 col-md-4\">Patient:</p>\r\n                      <span className=\"col-sm-4 col-md-4\">{patientDetail.patientname}</span>\r\n                    </div>\r\n                    <div className=\"row\">\r\n                      <p className=\"col-sm-4 col-md-4\">Invoice No:</p>\r\n                      <span className=\"col-sm-4 col-md-4\">{patientDetail.invoicenumber}</span>\r\n                    </div>\r\n                    <div className=\"row\">\r\n                      <p className=\"col-sm-4 col-md-4\">Date:</p>\r\n                      {/* <span className=\"col-sm-4 col-md-4\">{new Date(services[0].invoicedate).toLocaleDateString(\"en-UK\")}</span> */}\r\n                      <span className=\"col-sm-4 col-md-4\">{new Date(services[0].dateofservice).toLocaleDateString(\"en-UK\")}</span>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"col-sm-4 col-md-4\">\r\n                    <div className=\"row\">\r\n                      <p className=\"col-sm-4 col-md-4\">Patient Code:</p>\r\n                      <span className=\"col-sm-4 col-md-4\">{patientDetail.patientcode}</span>\r\n                    </div>\r\n                    <div className=\"row\">\r\n                      <p className=\"col-sm-4 col-md-4\">Gender:</p>\r\n                      <span className=\"col-sm-4 col-md-4\">{patientDetail.gender === 'M' ? 'Male' : patientDetail.gender === 'F' ? 'Female' : 'Unknown'}</span>\r\n                    </div>\r\n                    <div className=\"row\">\r\n                      <p className=\"col-sm-4 col-md-4\">DOB:</p>\r\n                      <span className=\"col-sm-4 col-md-4\">{new Date(patientDetail.dob).toLocaleDateString(\"en-UK\")}</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </section> ): null\r\n          }\r\n          {\r\n            serviceTable ? (\r\n              <section className=\"provider_detail\">\r\n                <table className=\"table table-bordered\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th>Provider</th>\r\n                      <th>Service</th>\r\n                      <th>Code</th>\r\n                      <th>Tooth</th>\r\n                      <th>Surface</th>\r\n                      <th>Amount</th>\r\n                      <th>VAT%</th>\r\n                      <th>VAT</th>\r\n                      <th>Amount With VAT</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {serviceTable}\r\n                  </tbody>\r\n                </table>\r\n              </section>\r\n            ) : null\r\n          }\r\n          {\r\n            serviceTable ? (\r\n              <section className=\"payment_detail\">\r\n                <div className=\"row\">\r\n                  <div className=\"col-sm-4 col-md-4\">\r\n                    <p>Payment Mode</p>\r\n                    {paymentsSection}\r\n                    <div className=\"row\">\r\n                      <p className=\"col-sm-6 col-md-6\">Total Payment:</p>\r\n                      <p className=\"col-sm-6 col-md-6\" style={{textAlign: \"right\"}}>{totalPayment.toFixed(2)}</p>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"col-sm-2 col-md-2\"></div>\r\n                  <div className=\"col-sm-4 col-md-4\">\r\n                    <div className=\"row\">\r\n                      <p className=\"col-sm-6 col-md-6\">Total:</p>\r\n                      <p className=\"col-sm-6 col-md-6\" style={{textAlign: \"right\"}}>{cost.totalCost.toFixed(2)}</p>\r\n                      <p className=\"col-sm-6 col-md-6\" >Discount:</p>\r\n                      <p className=\"col-sm-6 col-md-6\" style={{textAlign: \"right\"}}>{cost.discount.toFixed(2)}</p>\r\n                      <p className=\"col-sm-6 col-md-6\">Net Amount:</p>\r\n                      <p className=\"col-sm-6 col-md-6\" style={{textAlign: \"right\"}}>{cost.netAmount.toFixed(2)}</p>\r\n                      <p className=\"col-sm-6 col-md-6\">Total VAT:</p>\r\n                      <p className=\"col-sm-6 col-md-6\" style={{textAlign: \"right\"}}>{cost.totalVat.toFixed(2)}</p>\r\n                      <p className=\"col-sm-6 col-md-6\">\r\n                        <b>Grand Total:</b>\r\n                      </p>\r\n                      <p className=\"col-sm-6 col-md-6\" style={{textAlign: \"right\"}}>\r\n                        <b>{cost.grandTotal.toFixed(2)}</b>\r\n                      </p>\r\n                      <p className=\"col-sm-6 col-md-6\">\r\n                        <b>Total Payment:</b>\r\n                      </p>\r\n                      <p className=\"col-sm-6 col-md-6\" style={{textAlign: \"right\"}}>\r\n                        <b>{totalPayment.toFixed(2)}</b>\r\n                      </p>\r\n                      <p className=\"col-sm-6 col-md-6\">\r\n                        <b>Invoice Balance:</b>\r\n                      </p>\r\n                      <p className=\"col-sm-6 col-md-6\" style={{textAlign: \"right\"}}>\r\n                        <b>{(cost.grandTotal + cost.totalPayment).toFixed(2)}</b>\r\n                      </p>\r\n                      <p className=\"col-sm-6 col-md-6\">\r\n                        <b></b>\r\n                      </p>\r\n                      <p className=\"col-sm-6 col-md-6\">\r\n                        <b></b>\r\n                      </p>\r\n                      <p className=\"col-sm-6 col-md-6\">\r\n                        <b>Patient Balance:</b>\r\n                      </p>\r\n                      <p className=\"col-sm-6 col-md-6\" style={{textAlign: \"right\"}}>\r\n                        <b>{parseInt(patientDetail.balance).toFixed(2)}</b>\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </section>\r\n            ) : null\r\n          }\r\n          { patientDetail ? (\r\n            <>\r\n              <p><b>Note: Currency = {CURRENCY}</b></p>\r\n              <hr/>\r\n              <footer>\r\n                <span className=\"text-center\">\r\n                  {CLINIC_NAME}\r\n                </span>\r\n                <span className=\"text-center\">{CLINIC_ADDRESS}</span>\r\n                <span className=\"text-center\">\r\n                  {CLINIC_EMAIL}\r\n                </span>\r\n                <span className=\"text-end\">Powered by <b><i>DigiSol Ltd.</i></b></span>\r\n              </footer>\r\n              <div className=\"row justify-content-md-center no-print\">\r\n                <div className=\"col-sm-2 col-md-2\">\r\n                  <button type=\"button\" className=\"btn btn-primary\" onClick={(e)=>window.print()}>Print</button>\r\n                  <button type=\"button\" className=\"btn btn-btn-light\" onClick={(e)=>this.cancelInvoice(e)}>Cancel</button>\r\n                </div>\r\n              </div>\r\n            </>\r\n            ) : null\r\n          }\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default Invoice;"]},"metadata":{},"sourceType":"module"}