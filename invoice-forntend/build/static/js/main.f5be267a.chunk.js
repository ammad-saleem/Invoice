(this.webpackJsonpinvoice=this.webpackJsonpinvoice||[]).push([[0],{26:function(e,t,n){},27:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var s=n(2),c=n.n(s),a=n(20),r=n.n(a),i=(n(26),n(4)),l=n(5),o=n(7),d=n(6),u=(n(10),n(27),n(8)),j=n(3),b=n.n(j),h=n(0),m=window.env,p=m.REACT_APP_SERVER_URL,x=m.TRN,O=m.CLINIC_ADDRESS,g=m.CLINIC_NAME,f=m.CLINIC_EMAIL,N=m.CURRENCY,v=m.CR,D=(s.Component,n(11)),I=n.n(D),w=n(21),P=window.env,C=P.REACT_APP_SERVER_URL,y=(P.TRN,P.CLINIC_ADDRESS),S=P.CLINIC_NAME,R=P.CLINIC_EMAIL,L=(P.POWERED_BY,function(e){Object(o.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(i.a)(this,n),(s=t.call(this,e)).isValidId=function(e){return e?!isNaN(e)||(alert("Please enter a valid Patient Id"),!1):(alert("Please enter Patient Id first"),!1)},s.onInputchange=function(e){var t;s.setState((t={},Object(u.a)(t,e.target.name,parseInt(e.target.value)),Object(u.a)(t,"patient",{}),t))},s.onPrescriptionInputchange=function(e){s.setState(Object(u.a)({},e.target.name,e.target.value))},s.changePatient=function(e){s.setState({patientId:e.patientcode,patient:e})},s.showPatientList=function(e){e.preventDefault(),s.setState({showPatientList:!0,showInvoiceList:!1})},s.showPrescriptionTemplate=Object(w.a)(I.a.mark((function e(){var t,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.state.patientId,!(Object.keys(s.state.doctor).length<1||s.state.doctor.fullname.length<1)){e.next=4;break}return alert("Please select doctor first."),e.abrupt("return");case 4:if(!(s.state.patientId&&"number"===typeof s.state.patientId&&s.state.patientId>0)){e.next=12;break}return n=null,e.next=8,b.a.get(C+"getPrescriptionDetails?patientId="+t);case 8:(n=e.sent).data&&n.data.patientDetails&&n.data.patientDetails.length>0?s.setState({showPatientList:!1,patient:n.data.patientDetails[0],drugs:n.data.drugs,routes:n.data.routes,frequencies:n.data.frequencies,drugDetails:Object.assign({},s.drugDetailsTemplate),drugRows:[]}):alert("No Patient exists against this code"),e.next=13;break;case 12:alert("Patient Code must be a number");case 13:case"end":return e.stop()}}),e)}))),s.validateDrugDetails=function(){var e=s.state.drugDetails;e.drugId<1||e.drug.length<1?alert("Drug cannot be left blank"):e.frequencyId<1||e.frequency.length<1?alert("Frequency cannot be left blank"):e.routeId<1||e.route.length<1?alert("Route cannot be left blank"):e.dosage.length<1?alert("Dosage cannot be less than 1 or left blank"):e.duration.length<1?alert("Duration cannot be less than 1 or left blank"):s.addDrugDetails()},s.addDrugDetails=function(){var e=s.state.drugRows;e.push(Object.assign({},s.state.drugDetails)),s.setState({drugRows:e,drugDetails:Object.assign({},s.drugDetailsTemplate),showPrintButton:!0})},s.setField=function(e,t){var n=s.state.drugDetails;"form-select"===e.target.className?(n[t]=e.target.selectedOptions[0].text,n[t+"Id"]=e.target.value):n[t]=e.target.value,s.setState({drugDetails:n})},s.validatePrescription=function(){if(s.state.drugRows.length<1)alert("Add atleast one drug to generate prescription");else if(!s.state.patient||s.state.patient.patientcode<1||s.state.patient.patientname.length<1)alert("Patient Name or Id cannot cannot be left blank");else{var e={patientId:s.state.patient.patientcode,patientName:s.state.patient.patientname,doctor:s.state.doctor.fullname,drCode:s.state.doctor.usercode,drugDetail:s.state.drugRows,diagnosis:s.state.diagnosis,patientInstruction:s.state.patientInstruction};b.a.post(C+"savePrescription",e,{headers:{"Content-Type":"application/json"}}).then((function(e){console.log("RESPONSE RECEIVED: ",e);var t=new Date;document.title=JSON.parse(e.config.data).patientId+"-"+t.getUTCFullYear().toString()+"-"+(t.getUTCMonth()+1).toString()+"-"+t.getUTCDate(),s.setState({showPrintButton:!1}),window.print()})).catch((function(e){console.log("AXIOS ERROR: ",e)}))}},s.getAge=function(e){var t=new Date(e);return(Date.now()-t)/315576e5},s.setDoctor=function(e){var t=s.state.doctorList.filter((function(t){return e===t.fullname}));s.setState({doctor:t[0]})},s.drugDetailsTemplate={drugId:0,drug:"",dosage:"",frequencyId:0,frequency:"",routeId:0,route:"",duration:"",instructions:""},s.state={dated:(new Date).toLocaleString(),patient:{},showPatientList:!0,doctor:{},diagnosis:"",patientInstruction:"",routes:[],drugs:[],frequencies:[],drugRows:[],drugDetails:Object.assign({},s.drugDetailsTemplate),showPrintButton:!0},s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;b.a.get(C+"getPatientsAndDoctors").then((function(t){if(t.data){if(!(t.data.doctors&&t.data.doctors.length>0))return void alert("No Doctor found.");e.setState({doctorList:t.data.doctors}),t.data.patients&&t.data.patients.length>0?e.setState({patientList:t.data.patients}):alert("No Patient found.")}else alert("Backend Service failed to respond")}),(function(e){alert("Backend Service failed to respond"),console.log("error : ",e)}))}},{key:"render",value:function(){var e=this,t=this.state.patientList,n=this.state,s=n.patientId,c=n.patient,a=n.doctor,r=n.drugs,i=n.routes,l=n.frequencies,o=n.drugRows,d=n.drugDetails,u=n.showPatientList,j=n.doctorList,b=n.showPrintButton,m=r?r.map((function(e,t){return Object(h.jsx)("option",{value:e.drugId,title:e.formula,children:e.drugName},t)})):null,p=i?i.map((function(e,t){return Object(h.jsx)("option",{value:e.routeId,title:e.code,children:e.route},t)})):null,x=l?l.map((function(e,t){return Object(h.jsx)("option",{value:e.frequencyId,children:e.frequency},t)})):null,O=j?j.map((function(e,t){return Object(h.jsx)("option",{value:e.fullname,children:e.fullname},t)})):null,g=o.map((function(e,t){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:e.drug}),Object(h.jsx)("td",{children:e.dosage}),Object(h.jsx)("td",{children:e.frequency}),Object(h.jsx)("td",{children:e.route}),Object(h.jsx)("td",{children:e.duration}),Object(h.jsx)("td",{children:e.instructions})]},t)})),f=t?t.map((function(t,n){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{onClick:function(){return e.changePatient(t)},className:"link",children:t.patientcode}),Object(h.jsx)("td",{children:t.patientname}),Object(h.jsx)("td",{children:"M"===t.gender?"Male":"Female"}),Object(h.jsx)("td",{children:t.dob})]},n)})):null;return Object(h.jsxs)("div",{className:"receipt_box",children:[Object(h.jsx)("header",{children:Object(h.jsx)("div",{className:"logo",children:Object(h.jsx)("img",{src:"/logo.png"})})}),Object(h.jsx)("hr",{}),Object(h.jsxs)("div",{className:"prescription-tab",children:[Object(h.jsxs)("section",{className:"form_section no-print",children:[u?Object(h.jsx)("h2",{className:"text-center",children:"Prescription"}):null,Object(h.jsx)("input",{class:"form-input w-auto",placeholder:"Enter Patient Code",name:"patientId",type:"number",value:s,onChange:function(t){return e.onInputchange}}),Object(h.jsxs)("select",{class:"form-select select-doctor w-auto",value:a.fullname?a.fullname:"",onChange:function(t){return e.setDoctor(t.target.value)},children:[Object(h.jsx)("option",{disabled:!0,selected:!0,value:"",children:"Select Doctor"}),O]}),Object(h.jsx)("button",{className:"btn btn-primary",onClick:function(t){return e.showPrescriptionTemplate()},children:"Generate Prescription"}),u?Object(h.jsx)("button",{className:"btn btn-primary ml-10",onClick:function(t){return e.getInvoiceListByPatient(t)},children:"Get Prescriptions"}):Object(h.jsx)("button",{className:"btn btn-primary ml-10",onClick:function(t){return e.showPatientList(t)},children:"Show Patient List"})]}),f&&u?Object(h.jsx)("section",{className:"patient-list",children:Object(h.jsxs)("table",{className:"table table-bordered",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Patient Id"}),Object(h.jsx)("th",{children:"Patient Name"}),Object(h.jsx)("th",{children:"Gender"}),Object(h.jsx)("th",{children:"DOB"})]})}),Object(h.jsx)("tbody",{children:f})]})}):"",u?null:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("section",{className:"patient_detail",children:[Object(h.jsx)("h2",{className:"text-center",children:"Prescription"}),Object(h.jsx)("p",{className:"text-center mb-5"}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsxs)("div",{className:"col-sm-6 col-md-5",children:[Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("p",{className:"col-sm-4 col-md-4",children:"Patient:"}),Object(h.jsx)("span",{className:"col-sm-8 col-md-4",children:c.patientname})]}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("p",{className:"col-sm-4 col-md-4",children:"Doctor:"}),Object(h.jsx)("span",{className:"col-sm-8 col-md-4",children:a.fullname?a.fullname:""})]}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("p",{className:"col-sm-4 col-md-4",children:"DOB:"}),Object(h.jsx)("span",{className:"col-sm-8 col-md-4",children:new Date(c.dob).toLocaleDateString("en-UK")})]}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("p",{className:"col-sm-4 col-md-4",children:"Email:"}),"-                       ",Object(h.jsx)("span",{className:"col-sm-8 col-md-4",children:c.email})]}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("p",{className:"col-sm-4 col-md-4",children:"Mobile No:"}),Object(h.jsx)("span",{className:"col-sm-8 col-md-4",children:c.mobileno})]})]}),Object(h.jsxs)("div",{className:"col-sm-6 col-md-4",children:[Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("p",{className:"col-sm-4 col-md-4",children:"Patient Code:"}),Object(h.jsx)("span",{className:"col-sm-8 col-md-4",children:c.patientcode})]}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("p",{className:"col-sm-4 col-md-4",children:"Gender:"}),Object(h.jsx)("span",{className:"col-sm-8 col-md-4",children:"M"===c.gender?"Male":"F"===c.gender?"Female":"Unknown"})]}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("p",{className:"col-sm-4 col-md-4",children:"Date:"}),Object(h.jsx)("span",{className:"col-sm-8 col-md-4",children:(new Date).toLocaleDateString("en-UK")})]}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("p",{className:"col-sm-4 col-md-4",children:"Age:"}),Object(h.jsx)("span",{className:"col-sm-8 col-md-4",children:Math.round(this.getAge(c.dob))})]})]})]})]}),Object(h.jsx)("hr",{}),Object(h.jsxs)("div",{className:"container no-print",children:[Object(h.jsx)("h4",{className:"page-title",children:"Add Drugs"}),Object(h.jsxs)("div",{className:"row execute_container",children:[Object(h.jsxs)("div",{className:"inputGroup col-md-6",children:[Object(h.jsx)("label",{children:"Drug"}),Object(h.jsxs)("select",{class:"form-select",value:d.drugId>0?d.drugId:0,onChange:function(t){return e.setField(t,"drug")},children:[Object(h.jsx)("option",{selected:!0,value:"0",children:"Select Drug"}),m]})]}),Object(h.jsxs)("div",{className:"inputGroup col-md-3",children:[Object(h.jsx)("label",{children:"Dosage"}),Object(h.jsx)("input",{type:"number",step:"any",placeholder:"Quantity",value:d.dosage,onChange:function(t){return e.setField(t,"dosage")}})]}),Object(h.jsxs)("div",{className:"inputGroup col-md-3",children:[Object(h.jsx)("label",{children:"Frequency"}),Object(h.jsxs)("select",{class:"form-select",value:d.frequencyId>0?d.frequencyId:0,onChange:function(t){return e.setField(t,"frequency")},children:[Object(h.jsx)("option",{selected:!0,children:"Select Frequency"}),x]})]}),Object(h.jsxs)("div",{className:"inputGroup col-md-3",onChange:function(t){return e.setField(t,"route")},children:[Object(h.jsx)("label",{children:"Route"}),Object(h.jsxs)("select",{class:"form-select",value:d.routeId>0?d.routeId:0,onChange:function(t){return e.setField(t,"route")},children:[Object(h.jsx)("option",{selected:!0,children:"Select Route"}),p]})]}),Object(h.jsxs)("div",{className:"inputGroup col-md-3",children:[Object(h.jsx)("label",{children:"Duration"}),Object(h.jsx)("input",{type:"number",step:"any",value:d.duration,placeholder:"Days",onChange:function(t){return e.setField(t,"duration")}})]}),Object(h.jsxs)("div",{className:"inputGroup col-md-6",children:[Object(h.jsx)("label",{children:"Instructions"}),Object(h.jsx)("textarea",{class:"form-control rounded-0",value:d.instructions,onChange:function(t){return e.setField(t,"instructions")}})]}),Object(h.jsx)("div",{className:"inputGroup offset-md-5 col-md-2 d-flex justify-content-center",children:Object(h.jsx)("button",{className:"btn btn-primary ml-10",onClick:function(t){return e.validateDrugDetails()},children:"Add"})})]})]}),Object(h.jsx)("section",{className:"drug_detail mb-5",children:Object(h.jsxs)("table",{className:"table table-bordered",children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Drug"}),Object(h.jsx)("th",{children:"Dosage"}),Object(h.jsx)("th",{children:"Frequency"}),Object(h.jsx)("th",{children:"Route"}),Object(h.jsx)("th",{children:"Duration"}),Object(h.jsx)("th",{children:"Instructions"})]})}),Object(h.jsx)("tbody",{children:g})]})}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsxs)("div",{className:"inputGroup col-sm-4 col-md-4",children:[Object(h.jsx)("label",{children:"Diagnosis"}),Object(h.jsx)("input",{type:"text",name:"diagnosis",value:this.state.diagnosis,placeholder:"Diagnosis",onChange:this.onPrescriptionInputchange})]}),Object(h.jsxs)("div",{className:"inputGroup col-sm-8 col-md-8",children:[Object(h.jsx)("label",{children:"Patient Instructions"}),Object(h.jsx)("textarea",{class:"form-control rounded-0",name:"patientInstruction",value:this.state.patientInstruction,onChange:this.onPrescriptionInputchange})]})]}),Object(h.jsx)("hr",{}),Object(h.jsx)("section",{className:"payment_detail mt-5",children:Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("p",{className:"col-sm-2 col-md-1 text-end",children:"Provider:"}),Object(h.jsx)("p",{className:"col-sm-4 col-md-3 text-start",children:a.fullname?a.fullname:""}),Object(h.jsx)("p",{className:"col-sm-2 col-md-1 text-end",children:"Licence No:"}),Object(h.jsx)("p",{className:"col-sm-4 col-md-3 text-start",children:a.licence?a.licence:""})]})}),Object(h.jsxs)("footer",{children:[Object(h.jsx)("span",{className:"text-center",children:S}),Object(h.jsx)("span",{className:"text-center",children:y}),Object(h.jsx)("span",{className:"text-center",children:R}),Object(h.jsxs)("span",{className:"text-end",children:["Powered by ",Object(h.jsx)("b",{children:Object(h.jsx)("i",{children:"DigiSol Ltd."})})]})]}),b?Object(h.jsx)("div",{className:"row no-print justify-content-center",children:Object(h.jsx)("div",{className:"col-sm-2 col-md-2 d-flex justify-content-center",children:Object(h.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(t){return e.validatePrescription()},children:"Save & Print"})})}):null]})]})]})}}]),n}(s.Component)),k=function(e){Object(o.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(i.a)(this,n),t.call(this,e)}return Object(l.a)(n,[{key:"render",value:function(){return Object(h.jsx)(L,{})}}]),n}(s.Component),E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,49)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),s(e),c(e),a(e),r(e)}))};r.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(k,{})}),document.getElementById("root")),E()}},[[48,1,2]]]);
//# sourceMappingURL=main.f5be267a.chunk.js.map